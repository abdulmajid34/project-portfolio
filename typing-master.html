<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Typing Master - Abdul Majid Portfolio</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        body {
            background: linear-gradient(135deg, #74b9ff 0%, #0984e3 100%);
            min-height: 100vh;
            font-family: 'Arial', sans-serif;
        }

        .game-container {
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
        }

        .game-header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
        }

        .game-header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }

        .game-board {
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            margin-bottom: 20px;
        }

        .race-track {
            background: linear-gradient(to right, #2ecc71 0%, #27ae60 100%);
            height: 200px;
            border-radius: 10px;
            position: relative;
            margin-bottom: 30px;
            overflow: hidden;
        }

        .finish-line {
            position: absolute;
            right: 20px;
            top: 0;
            bottom: 0;
            width: 5px;
            background: repeating-linear-gradient(
                0deg,
                #fff 0px,
                #fff 10px,
                #000 10px,
                #000 20px
            );
        }

        .runner {
            position: absolute;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            font-size: 2rem;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: left 0.3s ease;
        }

        .player-runner {
            top: 40px;
            left: 20px;
            background: #3498db;
            color: white;
        }

        .ai-runner {
            bottom: 40px;
            left: 20px;
            background: #e74c3c;
            color: white;
        }

        .runner.running {
            animation: bounce 0.5s infinite alternate;
        }

        @keyframes bounce {
            0% { transform: translateY(0px); }
            100% { transform: translateY(-10px); }
        }

        .text-display {
            background: #f8f9fa;
            border: 2px solid #dee2e6;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            min-height: 100px;
            font-size: 1.2rem;
            line-height: 1.6;
        }

        .text-display .current-word {
            background: #fff3cd;
            padding: 2px 4px;
            border-radius: 3px;
        }

        .text-display .correct {
            background: #d4edda;
            color: #155724;
        }

        .text-display .incorrect {
            background: #f8d7da;
            color: #721c24;
        }

        .typing-area {
            width: 100%;
            height: 120px;
            border: 2px solid #dee2e6;
            border-radius: 10px;
            padding: 15px;
            font-size: 1.1rem;
            resize: none;
            outline: none;
            margin-bottom: 20px;
        }

        .typing-area:focus {
            border-color: #007bff;
            box-shadow: 0 0 5px rgba(0,123,255,0.3);
        }

        .stats {
            display: flex;
            justify-content: space-around;
            margin-bottom: 20px;
            flex-wrap: wrap;
            gap: 15px;
        }

        .stat-item {
            text-align: center;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 10px;
            min-width: 120px;
        }

        .stat-value {
            font-size: 1.5rem;
            font-weight: bold;
            color: #2c3e50;
        }

        .stat-label {
            font-size: 0.9rem;
            color: #7f8c8d;
        }

        .controls {
            text-align: center;
        }

        .btn {
            margin: 5px;
            padding: 10px 20px;
        }

        .back-btn {
            position: fixed;
            top: 20px;
            left: 20px;
            background: rgba(255,255,255,0.9);
            border: none;
            border-radius: 50px;
            padding: 10px 20px;
            text-decoration: none;
            color: #333;
            transition: all 0.3s ease;
        }

        .back-btn:hover {
            background: white;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            color: #333;
            text-decoration: none;
        }

        .winner-message {
            font-size: 1.5rem;
            font-weight: bold;
            margin: 20px 0;
            padding: 15px;
            border-radius: 10px;
            display: none;
            text-align: center;
        }

        .winner-message.show {
            display: block;
        }

        .winner-message.player-win {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }

        .winner-message.ai-win {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }

        .difficulty-selector {
            margin-bottom: 20px;
            text-align: center;
        }

        .progress-bar {
            height: 10px;
            background: #dee2e6;
            border-radius: 5px;
            overflow: hidden;
            margin-bottom: 10px;
        }

        .progress-fill {
            height: 100%;
            background: #28a745;
            width: 0%;
            transition: width 0.3s ease;
        }

        .ai-progress-fill {
            background: #dc3545;
        }

        @media (max-width: 768px) {
            .race-track {
                height: 150px;
            }

            .runner {
                width: 40px;
                height: 40px;
                font-size: 1.5rem;
            }

            .stats {
                flex-direction: column;
                align-items: center;
            }

            .stat-item {
                width: 100%;
                max-width: 200px;
            }
        }
    </style>
</head>
<body>
    <a href="index.html" class="back-btn">
        <i class="fas fa-arrow-left"></i> Back to Portfolio
    </a>

    <div class="container game-container">
        <div class="game-header">
            <h1><i class="fas fa-keyboard"></i> Typing Master</h1>
            <p>Race against the AI! Type as fast and accurately as you can!</p>
        </div>

        <div class="game-board">
            <div class="difficulty-selector">
                <label for="difficulty">Difficulty:</label>
                <select id="difficulty" class="form-select d-inline-block w-auto">
                    <option value="easy">Easy (30 WPM AI)</option>
                    <option value="medium" selected>Medium (50 WPM AI)</option>
                    <option value="hard">Hard (70 WPM AI)</option>
                </select>
            </div>

            <div class="race-track">
                <div class="finish-line"></div>
                <div class="runner player-runner" id="playerRunner">
                    <i class="fas fa-user"></i>
                </div>
                <div class="runner ai-runner" id="aiRunner">
                    <i class="fas fa-robot"></i>
                </div>
            </div>

            <div class="mb-3">
                <div class="progress-bar">
                    <div class="progress-fill" id="playerProgress"></div>
                </div>
                <small>Your Progress</small>
            </div>
            <div class="mb-3">
                <div class="progress-bar">
                    <div class="progress-fill ai-progress-fill" id="aiProgress"></div>
                </div>
                <small>AI Progress</small>
            </div>

            <div class="text-display" id="textDisplay">
                Click "Start Race" to begin!
            </div>

            <textarea
                class="typing-area"
                id="typingArea"
                placeholder="The text will appear above. Start typing here when the race begins..."
                disabled
            ></textarea>

            <div class="stats">
                <div class="stat-item">
                    <div class="stat-value" id="wpm">0</div>
                    <div class="stat-label">WPM</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="accuracy">100%</div>
                    <div class="stat-label">Accuracy</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="timeLeft">60</div>
                    <div class="stat-label">Time Left</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="aiWpm">0</div>
                    <div class="stat-label">AI WPM</div>
                </div>
            </div>

            <div class="winner-message" id="winnerMessage"></div>

            <div class="controls">
                <button class="btn btn-success" onclick="startRace()" id="startBtn">
                    <i class="fas fa-play"></i> Start Race
                </button>
                <button class="btn btn-warning" onclick="resetRace()" id="resetBtn">
                    <i class="fas fa-redo"></i> Reset
                </button>
                <button class="btn btn-info" onclick="newText()">
                    <i class="fas fa-refresh"></i> New Text
                </button>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        let gameActive = false;
        let startTime = null;
        let raceTimer = null;
        let raceTimeLeft = 60;
        let currentTextIndex = 0;
        let correctChars = 0;
        let totalChars = 0;
        let aiProgress = 0;
        let playerProgress = 0;
        let currentText = '';
        let aiSpeed = 50; // WPM

        const sampleTexts = [
            "The quick brown fox jumps over the lazy dog. This sentence contains every letter of the alphabet at least once.",
            "Programming is not about what you know; it's about what you can figure out. Every expert was once a beginner.",
            "The best time to plant a tree was 20 years ago. The second best time is now. Start where you are with what you have.",
            "Life is what happens to you while you're busy making other plans. Make each day count and pursue your dreams.",
            "Success is not final, failure is not fatal: it is the courage to continue that counts. Keep moving forward.",
            "The only way to do great work is to love what you do. Find your passion and let it guide your career.",
            "Innovation distinguishes between a leader and a follower. Be creative and think outside the box.",
            "Your limitation‚Äîit's only your imagination. Believe in yourself and push beyond your comfort zone."
        ];

        function initGame() {
            newText();
            updateDisplay();
        }

        function newText() {
            currentText = sampleTexts[Math.floor(Math.random() * sampleTexts.length)];
            displayText();
            resetProgress();
        }

        function displayText() {
            const textDisplay = document.getElementById('textDisplay');
            textDisplay.innerHTML = currentText;
            currentTextIndex = 0;
            totalChars = 0;
            correctChars = 0;
            updateAccuracy();
        }

        function startRace() {
            if (gameActive) return;

            gameActive = true;
            startTime = Date.now();
            raceTimeLeft = 60;
            currentTextIndex = 0;
            correctChars = 0;
            totalChars = 0;
            aiProgress = 0;
            playerProgress = 0;

            // Set AI speed based on difficulty
            const difficulty = document.getElementById('difficulty').value;
            switch(difficulty) {
                case 'easy': aiSpeed = 30; break;
                case 'medium': aiSpeed = 50; break;
                case 'hard': aiSpeed = 70; break;
            }

            document.getElementById('typingArea').disabled = false;
            document.getElementById('typingArea').focus();
            document.getElementById('startBtn').disabled = true;

            // Start AI racing
            startAIRace();

            // Start timer
            raceTimer = setInterval(() => {
                raceTimeLeft--;
                document.getElementById('timeLeft').textContent = raceTimeLeft;

                if (raceTimeLeft <= 0) {
                    endRace();
                }
            }, 1000);

            // Add typing listeners
            document.getElementById('typingArea').addEventListener('input', handleTyping);

            // Start runner animations
            document.getElementById('playerRunner').classList.add('running');
            document.getElementById('aiRunner').classList.add('running');
        }

        function handleTyping(e) {
            if (!gameActive) return;

            const typedText = e.target.value;
            const targetText = currentText.substring(0, typedText.length);

            totalChars = typedText.length;
            correctChars = 0;

            // Update text display with highlighting
            let displayHTML = '';

            for (let i = 0; i < currentText.length; i++) {
                if (i < typedText.length) {
                    if (typedText[i] === currentText[i]) {
                        displayHTML += `<span class="correct">${currentText[i]}</span>`;
                        if (i < typedText.length) correctChars++;
                    } else {
                        displayHTML += `<span class="incorrect">${currentText[i]}</span>`;
                    }
                } else if (i === typedText.length) {
                    displayHTML += `<span class="current-word">${currentText[i]}</span>`;
                } else {
                    displayHTML += currentText[i];
                }
            }

            document.getElementById('textDisplay').innerHTML = displayHTML;

            // Update progress
            playerProgress = (typedText.length / currentText.length) * 100;
            updatePlayerPosition();
            updateStats();

            // Check if player finished
            if (typedText === currentText) {
                endRace('player');
            }
        }

        function startAIRace() {
            const aiInterval = setInterval(() => {
                if (!gameActive) {
                    clearInterval(aiInterval);
                    return;
                }

                // AI types at specified WPM
                const timeElapsed = (Date.now() - startTime) / 1000 / 60; // minutes
                const expectedChars = (aiSpeed * 5) * timeElapsed; // average 5 chars per word
                aiProgress = Math.min((expectedChars / currentText.length) * 100, 100);

                updateAIPosition();
                document.getElementById('aiWpm').textContent = Math.round(aiSpeed);

                // Check if AI finished
                if (aiProgress >= 100) {
                    clearInterval(aiInterval);
                    endRace('ai');
                }
            }, 100);
        }

        function updatePlayerPosition() {
            const runner = document.getElementById('playerRunner');
            const trackWidth = runner.parentElement.offsetWidth - 80; // Account for runner width and finish line
            const position = (playerProgress / 100) * trackWidth;
            runner.style.left = `${20 + position}px`;

            document.getElementById('playerProgress').style.width = `${playerProgress}%`;
        }

        function updateAIPosition() {
            const runner = document.getElementById('aiRunner');
            const trackWidth = runner.parentElement.offsetWidth - 80;
            const position = (aiProgress / 100) * trackWidth;
            runner.style.left = `${20 + position}px`;

            document.getElementById('aiProgress').style.width = `${aiProgress}%`;
        }

        function updateStats() {
            const timeElapsed = (Date.now() - startTime) / 1000 / 60; // minutes
            const wordsTyped = correctChars / 5; // average 5 chars per word
            const wpm = timeElapsed > 0 ? Math.round(wordsTyped / timeElapsed) : 0;
            const accuracy = totalChars > 0 ? Math.round((correctChars / totalChars) * 100) : 100;

            document.getElementById('wpm').textContent = wpm;
            document.getElementById('accuracy').textContent = `${accuracy}%`;
        }

        function updateAccuracy() {
            const accuracy = totalChars > 0 ? Math.round((correctChars / totalChars) * 100) : 100;
            document.getElementById('accuracy').textContent = `${accuracy}%`;
        }

        function endRace(winner) {
            gameActive = false;
            clearInterval(raceTimer);

            document.getElementById('typingArea').disabled = true;
            document.getElementById('startBtn').disabled = false;

            // Stop runner animations
            document.getElementById('playerRunner').classList.remove('running');
            document.getElementById('aiRunner').classList.remove('running');

            // Show winner message
            const winnerMessage = document.getElementById('winnerMessage');
            winnerMessage.classList.remove('player-win', 'ai-win');

            if (winner === 'player') {
                winnerMessage.textContent = 'üéâ You Won the Race! Great typing!';
                winnerMessage.classList.add('player-win');
            } else if (winner === 'ai') {
                winnerMessage.textContent = 'ü§ñ AI Won the Race! Try again!';
                winnerMessage.classList.add('ai-win');
            } else {
                winnerMessage.textContent = '‚è∞ Time\'s Up! Race finished!';
                winnerMessage.classList.add('ai-win');
            }

            winnerMessage.classList.add('show');
        }

        function resetRace() {
            gameActive = false;
            clearInterval(raceTimer);

            document.getElementById('typingArea').value = '';
            document.getElementById('typingArea').disabled = true;
            document.getElementById('startBtn').disabled = false;
            document.getElementById('winnerMessage').classList.remove('show');

            // Reset positions
            resetProgress();

            // Reset stats
            document.getElementById('wpm').textContent = '0';
            document.getElementById('accuracy').textContent = '100%';
            document.getElementById('timeLeft').textContent = '60';
            document.getElementById('aiWpm').textContent = '0';

            // Stop animations
            document.getElementById('playerRunner').classList.remove('running');
            document.getElementById('aiRunner').classList.remove('running');

            displayText();
        }

        function resetProgress() {
            playerProgress = 0;
            aiProgress = 0;
            updatePlayerPosition();
            updateAIPosition();
        }

        function updateDisplay() {
            document.getElementById('timeLeft').textContent = raceTimeLeft;
        }

        // Initialize the game when page loads
        document.addEventListener('DOMContentLoaded', initGame);
    </script>
</body>
</html>